# Nmap - Network Mapper

## Overview
Nmap is a powerful network discovery and security auditing tool used for:
- Host discovery
- Port scanning
- Service version detection
- OS detection
- Network inventory

## Basic Usage

### Port Scanning
```bash
# Basic TCP scan on a single host
nmap target_ip

# Scan specific ports
nmap -p 80,443,8080 target_ip

# Scan a range of ports
nmap -p 1-1000 target_ip

# Fast scan (100 most common ports)
nmap -F target_ip
```

### Service and Version Detection
```bash
# Detect service versions
nmap -sV target_ip

# Aggressive scan (includes OS detection, version detection, etc.)
nmap -A target_ip
```

### OS Detection
```bash
# Detect operating system
nmap -O target_ip

# More reliable OS detection
nmap -O --osscan-guess target_ip
```

### Network Discovery
```bash
# Scan entire subnet
nmap 192.168.1.0/24

# Ping scan (discover hosts without port scanning)
nmap -sn 192.168.1.0/24

# List scan (just enumerate targets without sending packets)
nmap -sL 192.168.1.0/24
```

### Script Scanning
```bash
# Run default scripts
nmap -sC target_ip

# Run specific script
nmap --script http-title target_ip

# Run script category
nmap --script vuln target_ip
```

### Output Options
```bash
# Save output to files
nmap -oN scan.txt -oX scan.xml target_ip

# Verbose output
nmap -v target_ip

# Quiet output (only show open ports)
nmap --open target_ip
```

## Common Scan Types

### TCP Connect Scan (-sT)
```bash
nmap -sT target_ip
```
- Completes full TCP three-way handshake
- Most reliable but easily detected
- Requires root privileges on some systems

### SYN Scan (-sS)
```bash
nmap -sS target_ip
```
- Half-open scan (doesn't complete handshake)
- Faster and stealthier than TCP connect
- Requires root privileges

### UDP Scan (-sU)
```bash
nmap -sU target_ip
```
- Scans UDP ports
- Slower than TCP scans
- Useful for DNS, SNMP, DHCP services

## Timing Templates
```bash
# Paranoid (very slow, evasive)
nmap -T0 target_ip

# Sneaky (slow, evasive)
nmap -T1 target_ip

# Polite (slower than default)
nmap -T2 target_ip

# Normal (default)
nmap -T3 target_ip

# Aggressive (faster)
nmap -T4 target_ip

# Insane (very fast, may miss ports)
nmap -T5 target_ip
```

## Firewall Evasion
```bash
# Fragment packets
nmap -f target_ip

# Use decoy hosts
nmap -D decoy1,decoy2,ME target_ip

# Randomize source ports
nmap --source-port 53 target_ip

# Use specific MTU
nmap --mtu 8 target_ip
```

## Practical Examples

### Web Server Reconnaissance
```bash
# Comprehensive web server scan
nmap -p 80,443,8080,8443 -sV --script http-title,http-headers target_ip
```

### Internal Network Mapping
```bash
# Quick network inventory
nmap -sn 192.168.1.0/24 | grep "Nmap scan report"
```

### Vulnerability Scanning
```bash
# Scan for common vulnerabilities
nmap --script vuln 192.168.1.100
```

## Tips
- Use `-v` for verbose output to see scan progress
- Combine with `grep` to filter results
- Save output for documentation and comparison
- Be mindful of network impact when scanning large ranges
- Always ensure you have permission before scanning networks