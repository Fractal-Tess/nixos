# John the Ripper - Password Cracking

## Overview
John the Ripper (JtR) is a fast password cracking tool used for:
- Dictionary attacks
- Brute-force attacks
- Rainbow table attacks
- Password hash analysis

## Basic Usage

### Hash Identification
```bash
# Identify hash types
john --show hash_file.txt

# Show cracked passwords
john --show hash_file.txt
```

### Dictionary Attacks
```bash
# Basic dictionary attack
john --wordlist=/usr/share/wordlists/rockyou.txt hash_file.txt

# Use multiple wordlists
john --wordlist=wordlist1.txt --wordlist=wordlist2.txt hash_file.txt

# Enable word mangling rules
john --wordlist=wordlist.txt --rules hash_file.txt
```

### Brute-force Attacks
```bash
# Brute-force all possible combinations
john --incremental hash_file.txt

# Brute-force with specific character set
john --incremental:Alpha hash_file.txt  # Letters only
john --incremental:Digits hash_file.txt  # Numbers only
john --incremental:Alnum hash_file.txt  # Alphanumeric

# Custom character set brute-force
john --charset=?l?d?u hash_file.txt  # Lowercase, digits, uppercase
```

### Mask Attacks
```bash
# Attack with known password pattern
john --mask=?u?l?l?l?d?d?d?d hash_file.txt  # Ullldddd (Uppercase, 3 lowercase, 4 digits)

# Common patterns
john --mask='?u?l?l?l?l?d?d' hash_file.txt  # Admin12 format
john --mask='?w?w?w?d?d?d?d' hash_file.txt  # word1234 format
```

## Advanced Options

### Rule-based Attacks
```bash
# Use specific rules file
john --wordlist=wordlist.txt --rules=best64 hash_file.txt

# Create custom rules
john --wordlist=wordlist.txt --rules=/path/to/custom.rules hash_file.txt
```

### Parallel Processing
```bash
# Use multiple cores
john --fork=4 hash_file.txt

# Distributed cracking
john --session=session_name hash_file.txt
john --restore=session_name
```

### Format Specification
```bash
# Target specific hash type
john --format=sha256crypt hash_file.txt
john --format=md5 hash_file.txt
john --format=nt hash_file.txt

# List all supported formats
john --list=formats
```

## Hash Generation and Testing

### Generate Test Hashes
```bash
# Generate various hash types for testing
openssl passwd -1 -salt xyz password
mkpasswd -m sha-512 password
echo -n "password" | sha256sum
```

### Hash File Preparation
```bash
# Create hash file in proper format
echo '$1$salt$hashedpassword' > hash_file.txt

# Extract hashes from various sources
unshadow passwd_file shadow_file > hash_file.txt
```

## Practical Examples

### Quick Dictionary Attack
```bash
# Fast attack with common wordlist
john --wordlist=/usr/share/wordlists/rockyou.txt --rules hash_file.txt
```

### Targeted Attack
```bash
# Attack based on password policy (8+ chars, mixed case, numbers)
john --wordlist=wordlist.txt --rules --min-length=8 hash_file.txt
```

### Web Application Hashes
```bash
# WordPress MD5 hashes
john --format=raw-md5 --wordlist=wordlist.txt wordpress_hashes.txt

# Joomla MD5 + salt
john --format=phpass joomla_hashes.txt
```

### Windows Hashes
```bash
# NTLM hashes from SAM file
john --format=nt sam_hashes.txt

# LM hashes (legacy)
john --format=lm lm_hashes.txt
```

## Session Management

### Save and Restore Sessions
```bash
# Start session
john --session=my_crack --wordlist=wordlist.txt hash_file.txt

# Check session status
john --session=my_crack --status

# Restore session
john --restore=my_crack
```

## Output and Reporting

### Show Results
```bash
# Show all cracked passwords
john --show hash_file.txt

# Show cracked passwords in specific format
john --show --format=md5 hash_file.txt
```

### Log Files
```bash
# Check log file
cat ~/.john/john.log

# Check pot file (cracked passwords)
cat ~/.john/john.pot
```

## Optimization Tips

### Performance Tuning
```bash
# Enable OpenCL (GPU acceleration)
john --format=md5-opencl --wordlist=wordlist.txt hash_file.txt

# Use maximum threads
john --wordlist=wordlist.txt --mask=?a?a?a?a?a?a?a?a hash_file.txt
```

### Wordlist Selection
```bash
# Use sorted wordlist for better performance
john --wordlist=sorted_wordlist.txt hash_file.txt

# Create targeted wordlist
grep -E '^[a-zA-Z0-9]{8,12}$' large_wordlist.txt > targeted_wordlist.txt
```

## Tips
- Always hash-identify before starting attacks
- Start with dictionary attacks, then move to brute-force
- Use appropriate wordlists for the target environment
- Consider password policies when selecting attack methods
- Be mindful of legal and ethical considerations
- Save sessions for long-running attacks
- Use --show to verify cracked passwords