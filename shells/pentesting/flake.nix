{
  description =
    "A development environment for penetration testing and security research";

  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixpkgs-unstable";
    systems.url = "github:nix-systems/default";
  };

  outputs = { nixpkgs, systems, ... }:
    let
      eachSystem = f:
        nixpkgs.lib.genAttrs (import systems) (system:
          f (import nixpkgs {
            inherit system;
            config.allowUnfree = true;
          }));
    in {
      devShells = eachSystem (pkgs: {
        default = pkgs.mkShell {
          shellHook = ''
            echo "
            ╔═══════════════════════════════════════╗
            ║      PENETRATION TESTING SHELL         ║
            ╚═══════════════════════════════════════╝
            Ready for security assessment...
            " | ${pkgs.lolcat}/bin/lolcat
          '';
          packages = with pkgs; [
            # Network Analysis & Scanning
            nmap
            masscan
            wireshark-cli
            tcpdump
            netcat
            socat

            # Web Application Testing
            burpsuite
            gobuster
            dirb
            ffuf
            wfuzz
            sqlmap
            nikto

            # Password Attacks
            john
            wordlists
            hashcat
            hydra
            crunch

            # Wireless Testing
            aircrack-ng
            kismet

            # Forensics
            sleuthkit
            binwalk
            foremost

            # Exploitation Frameworks
            metasploit

            # Reverse Engineering
            ghidra
            radare2
            gdb

            # Cryptography Tools
            openssl
            gnupg
            hashdeep

            # Vulnerability Assessment
            nuclei
            nuclei-templates

            # Network Utilities (additional to home.nix)
            hping
            bind.dnsutils
            whois
            lsof

            # System Utilities (additional to home.nix)
            file
            binutils-unwrapped
            xxd

            # Scripting & Automation
            python3
            python3Packages.requests
            python3Packages.beautifulsoup4
            python3Packages.scapy
            ruby
            perl

            # Terminal & UI (additional to home.nix)
            tmux
          ];
        };
      });
    };
}
